const form=document.getElementById("recipeForm"),draftSwitch=document.getElementById("draftSwitch");function sendForm(t){axios.post(`${baseURL}admin/recipe`,t).then((t=>{if(!t.data.success){const e=Object.entries(t.data.errors).map((([t,e])=>`<strong>${t}:</strong> ${e}`)).join("<br>");Swal.fire({title:"No se pudo guardar la receta",html:e,icon:"error"})}t.data.success&&(Swal.fire(`${t.data.message}!`,"","success"),t.data.updated?setTimeout((()=>{window.location.reload()}),1500):(form.reset(),window.scrollTo({top:0,behavior:"smooth"})))})).catch((t=>{console.error("Error:",t)}))}function setNutritionalUnits(t){const[e,n,i,o]=t,a=document.getElementById("calories_unit"),r=document.getElementById("carbohydrates_unit"),c=document.getElementById("protein_unit"),d=document.getElementById("fat_unit");a.value=e,r.value=n,c.value=i,d.value=o}function createDateInputs(t){const[e,n,i,o,a,r]=t;initTimeCounter({inputId:"time_hour",max:12,step:1,initialValue:e}),initTimeCounter({inputId:"time_min",max:55,step:5,initialValue:n}),initTimeCounter({inputId:"baked_hour",max:12,step:1,initialValue:i}),initTimeCounter({inputId:"baked_min",max:55,step:5,initialValue:o}),initTimeCounter({inputId:"refrigeration_hour",max:12,step:1,initialValue:a}),initTimeCounter({inputId:"refrigeration_min",max:55,step:5,initialValue:r})}function downloadImage(t,e){fetch(t).then((t=>t.blob())).then((t=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e,n.click(),window.URL.revokeObjectURL(n.href)})).catch((t=>console.error("Error al descargar la imagen:",t)))}form.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData(form);if(draftSwitch.checked&&e.append("draft",draftSwitch.checked),e.append("description",quill.root.innerHTML),draftSwitch.checked){Swal.mixin({customClass:{confirmButton:"btn btn-success-light",cancelButton:"btn btn-danger-light"},buttonsStyling:!1,allowOutsideClick:!1}).fire({title:"Borrador esta activado, quieres continuar?",showCancelButton:!0,confirmButtonText:"Continuar"}).then((t=>{t.isConfirmed&&sendForm(e)}))}else sendForm(e)}));